{% load compress staticfiles active %}
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>{% block page_title %}{{ _("Your Site") }}{% endblock %}</title>
    
    {% block meta %}

        <meta name="description" content="{% block meta_description %}{% endblock %}">
        <meta name="author" content="{% block meta_author %}{% endblock %}">

        <!-- Mobile viewport optimized: h5bp.com/viewport -->
        <meta name="viewport" content="width=device-width">

    {% endblock %}

    {% block cdn_css %}
    {% endblock cdn_css %}

    {% compress css %}

        <link rel="stylesheet" href="{% static 'css/theme/bootstrap.less' %}" type="text/less">
        <link rel="stylesheet" href="{% static 'css/base.less' %}" type="text/less">

        {% block css %}
        {% endblock %}
    {% endcompress %}

</head>
<body class="{% block body_class %}{% endblock %}">

    <div role="main">
        {% block navigation_bar %}
            <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
                <div class="container">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse"
                                data-target=".navbar-collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="{% url 'home' %}">Message Coding</a>
                    </div>

                    {% load active %}
                    {% url 'user_dash' as user_dash %}
                    <div id="navbar" class="navbar-collapse collapse">
                        <ul class="nav navbar-nav">
                            <li class="{% active request user_dash %}"><a href="{% url 'user_dash' %}">Dashboard</a>
                            </li>
                            <li class="{% active request '/#' %}"><a href="#">(Place holder)</a></li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                                   aria-expanded="false">Dropdown <span class="caret"></span></a>
                                <ul class="dropdown-menu" role="menu">
                                    <li><a href="#">Action</a></li>
                                    <li><a href="#">Another action</a></li>
                                    <li><a href="#">Something else here</a></li>
                                    <li class="divider"></li>
                                    <li class="dropdown-header">Nav header</li>
                                    <li><a href="#">Separated link</a></li>
                                    <li><a href="#">One more separated link</a></li>
                                </ul>
                            </li>
                        </ul>

                        {% if user.is_anonymous %}
                            <div id='sign-in-wrap'>
                                <a id='sign-in-btn' class="btn btn-success" role="button" href="{% url 'user_dash' %}">Sign
                                    in</a>
                            </div>
                        {% else %}
                            <ul class="nav navbar-nav navbar-right">
                                <li><p class="navbar-text">Welcome {{ user.username }}!</p></li>
                                <li><a href="{% url 'django.contrib.auth.views.logout' %}">Logout</a></li>
                            </ul>
                        {% endif %}
                    </div>
                    <!--/.navbar-collapse -->
                </div>
            </div>
        {% endblock %}

        {% block content %}{% endblock %}
    </div>

    <footer>
        {% block footer %}
            <div class="container">
                <hr>
                <p>&copy; University of Washington 2014</p>
            </div>
        {% endblock footer %}
    </footer>


    <!-- JavaScript at the bottom for fast page loading -->

    <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
    {% block cdn_js %}
        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="{% static 'bower/jquery/dist/jquery.min.js' %}"><\/script>')</script>
    {% endblock cdn_js %}

    <!-- scripts concatenated and minified via django-compressor -->
    {% compress js %}
        {% block js %}
            <script src="{% static 'bower/components-bootstrap/js/bootstrap.js' %}" type="text/javascript"></script>
            <script src="{% static 'js/plugins.js' %}" type="text/javascript"></script>
            <script src="{% static 'js/main.js' %}" type="text/javascript"></script>
        {% endblock js %}
    {% endcompress %}
    <!-- end scripts -->

    <!-- scripts for bootstrapping from django -->
    {% block bootstrapping %}
    {% endblock %}
    <!-- end scripts -->

    {% if GOOGLE_ANALYTICS_ID %}
        <!-- Asynchronous Google Analytics snippet. Change UA-XXXXX-X to be your site's ID.
             mathiasbynens.be/notes/async-analytics-snippet -->
        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r;
                i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
                a = s.createElement(o),
                        m = s.getElementsByTagName(o)[0];
                a.async = 1;
                a.src = g;
                m.parentNode.insertBefore(a, m)
            })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

            ga('create', '{{ GOOGLE_ANALYTICS_ID }}', 'auto');
            ga('send', 'pageview');
        </script>
    {% endif %}
</body>
</html>
